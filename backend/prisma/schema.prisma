generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("MONGODB_URI")
}

model Event {
  id   String  @id @default(auto()) @map("_id") @db.ObjectId
  date String?

  venue   Venue  @relation(fields: [venueId], references: [id])
  venueId String @db.ObjectId

  Review Review[]
}

model Reaction {
  id    String @id @default(auto()) @map("_id") @db.ObjectId
  emoji String

  review   Review @relation(fields: [reviewId], references: [id])
  reviewId String @db.ObjectId

  userIds String[]
}

model Review {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  createdAt DateTime @default(now())
  rating    Float
  text      String

  user   User   @relation(fields: [userId], references: [id])
  userId String @db.ObjectId

  event   Event  @relation(fields: [eventId], references: [id])
  eventId String @db.ObjectId

  Reaction Reaction[]
}

model User {
  id          String @id @default(auto()) @map("_id") @db.ObjectId
  displayName String
  email       String @unique
  photoUrl    String

  review Review[]
}

model Venue {
  id       String @id @default(auto()) @map("_id") @db.ObjectId
  location String
  name     String
  website  String

  events Event[]
}
